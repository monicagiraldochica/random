---
cluster: "hpc"

form:
  - modules
  - account
  - job_type
  - bc_num_hours
  - num_of_cores
  - bc_email_on_started
  - email_time_warning

attributes:
  modules: "phenix/1.21.2"
  account:
    label: "SLURM Account"
    required: true
    <%- if SlurmAccounts.accounts.blank? -%>
    widget: text_field
    <%- else -%>
    widget: select
    options:
      <%- SlurmAccounts.accounts.each do |a| -%>
      - "<%= a.strip %>"
      <%- end -%>
    <%- end -%>
  job_type:
    widget: select
    cacheable: false
    label: "Instance type (1 per user)"
    help: |
      - **Quick** - (*4 cores, 30 GB memory*)
      - **Compute Optimized** - (*12 cores, 90 GB memory*)
      - **Memory Optimized** - (*12 cores, 360 GB memory*)
      - **GPU Optimized** - (*12 cores, 90GB memory, 1 GPU*)
    options:
      - [ "Quick", "quick" ]
      - [ "Compute Optimized", "normal" ]
      - [ "Memory Optimized", "bigmem" ]
      - [ "GPU Optimized", "gpu" ]
  bc_num_hours:
    min: 1
    max: 8
    step: 1
  num_of_cores: 1
  email_time_warning:
    widget: check_box
    label: "I would like to receive an email when 90% of my time limit is consumed"
